
Parameters:
  EnvironmentName:
    Description: An environment name that will be prefixed to resource names
    Type: String
  VpcCIDR:
    Description: Please enter the IP range (CIDR notation) for this VPC
    Type: String
    Default: 10.0.0.0/16
  PublicSubnet1CIDR:
    Description: Please enter the IP range (CIDR notation) for the public subnet in
      the first Availability Zone
    Type: String
    Default: 10.0.0.0/24
  PublicSubnet2CIDR:
    Description: Please enter the IP range (CIDR notation) for the public subnet in
      the second Availability Zone
    Type: String
    Default: 10.0.1.0/24
  PrivateSubnet1CIDR:
    Description: Please enter the IP range (CIDR notation) for the private subnet
      in the first Availability Zone
    Type: String
    Default: 10.0.2.0/24
  PrivateSubnet2CIDR:
    Description: Please enter the IP range (CIDR notation) for the private subnet
      in the second Availability Zone
    Type: String
    Default: 10.0.3.0/24
  ImageAmi:
    Description: ami-id
    Type: String
Resources:
  NetworkStack:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: https://s3.us-east-1.amazonaws.com/s33final/9ebb09752d0358cc0c9b385dc4b1d8bc.template
      Parameters:
        EnvironmentName:
          Ref: EnvironmentName
  ServerStack:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: https://s3.us-east-1.amazonaws.com/s33final/503ca8d7ca0186184aa2d18e98f43ce3.template
      Parameters:
        EnvironmentName:
          Ref: EnvironmentName
        ImageId:
          Ref: ImageAmi
      VPC:
        Fn::GetAtt:
        - NetworkStack
        - Outputs.VPC
      VPCPublicRouteTable:
        Fn::GetAtt:
        - NetworkStack
        - Outputs.VPCPublicRouteTable
      VPCPrivateRouteTable1:
        Fn::GetAtt:
        - NetworkStack
        - Outputs.VPCPrivateRouteTable1
      VPCPrivateRouteTable2:
        Fn::GetAtt:
        - NetworkStack
        - Outputs.VPCPrivateRouteTable2
      PublicSubnets:
        Fn::GetAtt:
        - NetworkStack
        - Outputs.PublicSubnets
      PrivateSubnets:
        Fn::GetAtt:
        - NetworkStack
        - Outputs.PrivateSubnets
      PublicSubnet1:
        Fn::GetAtt:
        - NetworkStack
        - Outputs.PublicSubnet1
      PublicSubnet2:
        Fn::GetAtt:
        - NetworkStack
        - Outputs.PublicSubnet2
      PrivateSubnet1:
        Fn::GetAtt:
        - NetworkStack
        - Outputs.PrivateSubnet1
      PrivateSubnet2:
        Fn::GetAtt:
        - NetworkStack
        - Outputs.PrivateSubnet2
